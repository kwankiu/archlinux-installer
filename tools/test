network_option() {
    colorecho "$GREEN" "Network Option:"
    echo "Press 'w' to connect to a WiFi network"
    echo "Press 's' to skip internet Check (installation may fail)"

    # Set terminal to non-blocking mode to read single keypress
    stty -echo raw

    # Read a single keypress with timeout of 0.1 seconds
    keypress=''
    while [ "$keypress" = '' ]; do
        # Check internet connectivity in the background
        (check_internet) &

        # Read single keypress with timeout
        read -t 0.1 -n 1 keypress
    done

    # Restore terminal settings
    stty echo -raw

    case $keypress in
        [wW])
            echo "Connecting to a WiFi network..."
            # Add your code to connect to WiFi here
            ;;
        [sS])
            echo "Skipping internet Check"
            ;;
        *)
            echo "Invalid choice."
            ;;
    esac
}
network_option